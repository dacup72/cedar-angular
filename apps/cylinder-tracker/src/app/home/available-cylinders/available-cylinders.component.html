<cylinder-tracker-home-card [cardTitle]="'Available Cylinders'" class="cylinders-card">
  <ng-container class="card-title-content">
    <button mat-raised-button (click)="editCylinder.emit(null)">Add Cylinder</button>
  </ng-container>

  <ng-template #filterSection>
    <div class="card-filters">
      <div class="filter-input-section">
        <ui-select-autocomplete
          [hidden]="!filtersForSpares || crossCardFilters.filterItem"
          [selectTitle]="'Cylinder ID'"
          [options]="cylinderIDs"
          (selectionChange)="cylinderIDSelected($event)"
          [clearItems]="clearFilterItems"
        >
        </ui-select-autocomplete>
        <cedar-all-ui-filter-chips
          [hidden]="!filtersForSpares || crossCardFilters.filterItem"
          [filterItemName]="'Gas Type'"
          [allItems]="gasTypes"
          (selectionChange)="gasTypeSelected($event)"
          [clearItems]="clearFilterItems"
        >
        </cedar-all-ui-filter-chips>

        <!-- <ui-select-autocomplete
          *ngIf="!filtersForSpares && !crossCardFilters.filterItem"
          [selectTitle]="'Unit'"
          [options]="unitNames"
          (selectionChange)="unitNameSelected($event)"
          [clearItems]="clearFilterItems"
        >
        </ui-select-autocomplete>
        <ui-select-autocomplete
          *ngIf="!filtersForSpares && !crossCardFilters.filterItem"
          [selectTitle]="'Gas Description'"
          [options]="testTypes"
          (selectionChange)="testTypeSelected($event)"
          [clearItems]="clearFilterItems"
        >
        </ui-select-autocomplete> -->

        <cedar-all-ui-filter-chips
          [hidden]="filtersForSpares || crossCardFilters.filterItem"
          [filterItemName]="'Unit'"
          [allItems]="unitNames"
          (selectionChange)="unitNameSelected($event)"
          [clearItems]="clearFilterItems">
        </cedar-all-ui-filter-chips>
        <cedar-all-ui-filter-chips
          [hidden]="filtersForSpares || crossCardFilters.filterItem"
          [filterItemName]="'Gas Description'"
          [allItems]="testTypes"
          (selectionChange)="testTypeSelected($event)"
          [clearItems]="clearFilterItems">
        </cedar-all-ui-filter-chips>

        <div *ngIf="crossCardFilters.filterItem" class="filtered-by-click mat-elevation-z8">
          <span>Filtered For: {{ crossCardFilters.filterItem }}</span>
        </div>
      </div>
      <div class="filter-btn-section">
        <button mat-button class="clear-filters-btn" (click)="null">Advanced Filters</button>
        <button mat-button class="clear-filters-btn" (click)="clearFilters()">Clear Filters</button>
      </div>
    </div>
  </ng-template>

  <cylinder-tracker-home-tab-group
    class="card-content"
    [tabLeftLabel]="'Spare Cylinders'"
    [tabRightLabel]="'In-Service Cylinders'"
    (selectedTabChange)="tabChanged($event)"
  >
    <ng-container *ngTemplateOutlet="filterSection" class="tab-left-top-content"></ng-container>
    <ul
      class="tab-left-content"
      cdkDropList
      id="sparesDropList"
      (cdkDropListDropped)="cylinderDropped.emit($event)"
      [cdkDropListData]="spareCylinders"
      [cdkDropListConnectedTo]="dropListConnections"
      cdkDropListSortingDisabled
    >
      <li
        cdkDrag
        *ngFor="
          let cylinder of spareCylinders
            | cylinderFilter
              : (filterForOtherCard ? crossCardFilters : cylinderFilters);
          trackBy: trackCylinder
        "
        [cdkDragData]="cylinder"
        (click)="cylinderSelected.emit(cylinder)"
      >
        <cylinder-tracker-cylinder-item
          class="mat-elevation-z8"
          [ngClass]="cylinder.errorList.length ? 'border-red' : 'cylinder-item-border-spare'"
          [cylinder]="cylinder"
          [isAssignedCylinder]="false"
          [units]="units"
          (cylinderDropped)="cylinderDropped.emit($event)"
          (cylinderSelected)="cylinderSelected.emit($event)"
          (retireCylinder)="retireCylinder.emit($event)"
          (editCylinder)="editCylinder.emit($event)"
          (filterOtherCard)="filterOtherCard.emit($event)"
          (createSimilarCyl)="createSimilarCyl.emit($event)"
        >
        </cylinder-tracker-cylinder-item>
      </li>
    </ul>

    <ng-container *ngTemplateOutlet="filterSection" class="tab-right-top-content"></ng-container>
    <ul
      class="tab-right-content"
      cdkDropList
      id="inUseDropList"
      (cdkDropListDropped)="cylinderDropped.emit($event)"
      [cdkDropListData]="inUseCylinders"
      [cdkDropListConnectedTo]="dropListConnections"
      cdkDropListSortingDisabled
    >
      <li
        cdkDrag
        *ngFor="
          let cylinder of inUseCylinders
            | cylinderFilter
              : (filterForOtherCard ? crossCardFilters : cylinderFilters)
              : gasProfiles
        "
        [cdkDragData]="cylinder"
        (click)="cylinderSelected.emit(cylinder)"
      >
        <cylinder-tracker-cylinder-item
          class="mat-elevation-z8"
          [ngClass]="cylinder.errorList.length ? 'border-red' : 'cylinder-item-border-inUse'"
          [cylinder]="cylinder"
          [units]="units"
          [isAssignedCylinder]="true"
          [gasProfiles]="gasProfiles"
          [cylAssignedProfiles]="cylAssignedProfiles"
          (cylinderDropped)="cylinderDropped.emit($event)"
          (cylinderSelected)="cylinderSelected.emit($event)"
          (retireCylinder)="retireCylinder.emit($event)"
          (editCylinder)="editCylinder.emit($event)"
          (filterOtherCard)="filterOtherCard.emit($event)"
          (createSimilarCyl)="createSimilarCyl.emit($event)"
        >
        </cylinder-tracker-cylinder-item>
      </li>
    </ul>
  </cylinder-tracker-home-tab-group>
</cylinder-tracker-home-card>
